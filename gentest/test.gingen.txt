// +build gin

// Please don't edit this file!
package main

import (
	"fmt"
	"io"
	"net/http"
	"strconv"
	"strings"
	"time"

	"github.com/gin-gonic/gin"
)

func httpCodeWith(err error) int {
	if herr, ok := err.(interface {
		HTTPCode() int
	}); ok {
		return herr.HTTPCode()
	}
	return http.StatusInternalServerError
}

// TimeRange is skipped
// TimeRange2 is skipped
// QueryArgs is skipped

func InitStringSvc(mux gin.IRouter, svc StringSvc) {
	mux.GET("/allfiles", func(ctx *gin.Context) {
		list, total, err := svc.GetAllFiles()
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}

		result := map[string]interface{}{
			"list":  list,
			"total": total,
		}

		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/test_by_key", func(ctx *gin.Context) {
		var key Key
		if s := ctx.Query("key"); s != "" {
			keyValue, err := strconv.ParseInt(s, 10, 64)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", key, s, err).Error())
				return
			}
			key = Key(keyValue)
		}

		err := svc.TestByKey(key)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, "OK")
		return
	})
	mux.GET("/test64/:id", func(ctx *gin.Context) {
		id, err := strconv.ParseInt(ctx.Param("id"), 10, 64)
		if err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", id, ctx.Param("id"), err).Error())
			return
		}

		err = svc.TestInt64Path(id)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, "OK")
		return
	})
	mux.GET("/test64", func(ctx *gin.Context) {
		var id int64
		if s := ctx.Query("id"); s != "" {
			idValue, err := strconv.ParseInt(s, 10, 64)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", id, s, err).Error())
				return
			}
			id = idValue
		}

		err := svc.TestInt64Query(id)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, "OK")
		return
	})
	mux.GET("/test_query_args1/:id", func(ctx *gin.Context) {
		id, err := strconv.ParseInt(ctx.Param("id"), 10, 64)
		if err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", id, ctx.Param("id"), err).Error())
			return
		}
		var args QueryArgs
		if s := ctx.Query("args.fint"); s != "" {
			argsFintValue, err := strconv.Atoi(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", args.fint, s, err).Error())
				return
			}
			args.fint = argsFintValue
		}
		args.fstring = ctx.Query("args.fstring")
		if s := ctx.Query("args.ftime"); s != "" {
			argsFtimeValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", args.ftime, s, err).Error())
				return
			}
			args.ftime = argsFtimeValue
		}
		if s := ctx.Query("args.fintptr"); s != "" {
			argsFintptrValue, err := strconv.Atoi(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", args.fintptr, s, err).Error())
				return
			}
			args.fintptr = &argsFintptrValue
		}
		if s := ctx.Query("args.fstringptr"); s != "" {
			args.fstringptr = &s
		}
		if s := ctx.Query("args.ftimeptr"); s != "" {
			argsFtimeptrValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", args.ftimeptr, s, err).Error())
				return
			}
			args.ftimeptr = &argsFtimeptrValue
		}

		err = svc.TestQueryArgs1(id, args)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, "OK")
		return
	})
	mux.GET("/test_query_args2/:id", func(ctx *gin.Context) {
		id, err := strconv.ParseInt(ctx.Param("id"), 10, 64)
		if err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", id, ctx.Param("id"), err).Error())
			return
		}
		var args *QueryArgs
		if s := ctx.Query("args.fint"); s != "" {
			argsFintValue, err := strconv.Atoi(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", args.fint, s, err).Error())
				return
			}
			args = &QueryArgs{}
			args.fint = argsFintValue
		}
		if s := ctx.Query("args.fstring"); s != "" {
			if args == nil {
				args = &QueryArgs{}
			}
			args.fstring = s
		}
		if s := ctx.Query("args.ftime"); s != "" {
			argsFtimeValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", args.ftime, s, err).Error())
				return
			}
			if args == nil {
				args = &QueryArgs{}
			}
			args.ftime = argsFtimeValue
		}
		if s := ctx.Query("args.fintptr"); s != "" {
			argsFintptrValue, err := strconv.Atoi(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", args.fintptr, s, err).Error())
				return
			}
			if args == nil {
				args = &QueryArgs{}
			}
			args.fintptr = &argsFintptrValue
		}
		if s := ctx.Query("args.fstringptr"); s != "" {
			if args == nil {
				args = &QueryArgs{}
			}
			args.fstringptr = &s
		}
		if s := ctx.Query("args.ftimeptr"); s != "" {
			argsFtimeptrValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", args.ftimeptr, s, err).Error())
				return
			}
			if args == nil {
				args = &QueryArgs{}
			}
			args.ftimeptr = &argsFtimeptrValue
		}

		err = svc.TestQueryArgs2(id, args)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, "OK")
		return
	})
	mux.GET("/test_query_args3/:id", func(ctx *gin.Context) {
		id, err := strconv.ParseInt(ctx.Param("id"), 10, 64)
		if err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", id, ctx.Param("id"), err).Error())
			return
		}
		var args QueryArgs
		if s := ctx.Query("fint"); s != "" {
			argsFintValue, err := strconv.Atoi(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", fint, s, err).Error())
				return
			}
			args.fint = argsFintValue
		}
		args.fstring = ctx.Query("fstring")
		if s := ctx.Query("ftime"); s != "" {
			argsFtimeValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", ftime, s, err).Error())
				return
			}
			args.ftime = argsFtimeValue
		}
		if s := ctx.Query("fintptr"); s != "" {
			argsFintptrValue, err := strconv.Atoi(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", fintptr, s, err).Error())
				return
			}
			args.fintptr = &argsFintptrValue
		}
		if s := ctx.Query("fstringptr"); s != "" {
			args.fstringptr = &s
		}
		if s := ctx.Query("ftimeptr"); s != "" {
			argsFtimeptrValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", ftimeptr, s, err).Error())
				return
			}
			args.ftimeptr = &argsFtimeptrValue
		}

		err = svc.TestQueryArgs3(id, args)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, "OK")
		return
	})
	mux.GET("/test_query_args4/:id", func(ctx *gin.Context) {
		id, err := strconv.ParseInt(ctx.Param("id"), 10, 64)
		if err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", id, ctx.Param("id"), err).Error())
			return
		}
		var args *QueryArgs
		if s := ctx.Query("fint"); s != "" {
			argsFintValue, err := strconv.Atoi(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", fint, s, err).Error())
				return
			}
			args = &QueryArgs{}
			args.fint = argsFintValue
		}
		if s := ctx.Query("fstring"); s != "" {
			if args == nil {
				args = &QueryArgs{}
			}
			args.fstring = s
		}
		if s := ctx.Query("ftime"); s != "" {
			argsFtimeValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", ftime, s, err).Error())
				return
			}
			if args == nil {
				args = &QueryArgs{}
			}
			args.ftime = argsFtimeValue
		}
		if s := ctx.Query("fintptr"); s != "" {
			argsFintptrValue, err := strconv.Atoi(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", fintptr, s, err).Error())
				return
			}
			if args == nil {
				args = &QueryArgs{}
			}
			args.fintptr = &argsFintptrValue
		}
		if s := ctx.Query("fstringptr"); s != "" {
			if args == nil {
				args = &QueryArgs{}
			}
			args.fstringptr = &s
		}
		if s := ctx.Query("ftimeptr"); s != "" {
			argsFtimeptrValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", ftimeptr, s, err).Error())
				return
			}
			if args == nil {
				args = &QueryArgs{}
			}
			args.ftimeptr = &argsFtimeptrValue
		}

		err = svc.TestQueryArgs4(id, args)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, "OK")
		return
	})
	mux.GET("/ping", func(ctx *gin.Context) {
		err := svc.Ping()
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, "OK")
		return
	})
	mux.GET("/echo", func(ctx *gin.Context) {
		var a = ctx.Query("a")

		result := svc.Echo(a)
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.POST("/echo2", func(ctx *gin.Context) {
		result, err := svc.EchoBody(ctx.Request.Body)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusCreated, result)
		return
	})
	mux.POST("/echo3", func(ctx *gin.Context) {
		var bindArgs struct {
			A string `json:"a,omitempty"`
		}
		if err := ctx.Bind(&bindArgs); err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", bindArgs, "body", err).Error())
			return
		}

		result, err := svc.Echo3(ctx.Request.Context(), bindArgs.A)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusCreated, result)
		return
	})
	mux.GET("/concat", func(ctx *gin.Context) {
		var a = ctx.Query("a")
		var b = ctx.Query("b")

		result, err := svc.Concat(a, b)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/concat1", func(ctx *gin.Context) {
		var a *string
		if s := ctx.Query("a"); s != "" {
			a = &s
		}
		var b *string
		if s := ctx.Query("b"); s != "" {
			b = &s
		}

		result, err := svc.Concat1(a, b)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/concat2/:a/:b", func(ctx *gin.Context) {
		var a = ctx.Param("a")
		var b = ctx.Param("b")

		result, err := svc.Concat2(a, b)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/concat3/:a/:b", func(ctx *gin.Context) {
		var a = ctx.Param("a")
		var b = ctx.Param("b")

		result, err := svc.Concat3(&a, &b)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/sub", func(ctx *gin.Context) {
		var a = ctx.Query("a")
		var start int64
		if s := ctx.Query("start"); s != "" {
			startValue, err := strconv.ParseInt(s, 10, 64)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", start, s, err).Error())
				return
			}
			start = startValue
		}

		result, err := svc.Sub(a, start)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.POST("/save/:a", func(ctx *gin.Context) {
		var a = ctx.Param("a")
		var b strings.Builder
		if _, err := io.Copy(&b, ctx.Request.Body); err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", b, "body", err).Error())
			return
		}

		result, err := svc.Save(a, b.String())
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusCreated, result)
		return
	})
	mux.POST("/save2/:a", func(ctx *gin.Context) {
		var a = ctx.Param("a")
		var b strings.Builder
		if _, err := io.Copy(&b, ctx.Request.Body); err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", b, "body", err).Error())
			return
		}

		result, err := svc.Save2(&a, b.String())
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusCreated, result)
		return
	})
	mux.POST("/save3", func(ctx *gin.Context) {
		var bindArgs struct {
			A *string `json:"a,omitempty"`
			B *string `json:"b,omitempty"`
		}
		if err := ctx.Bind(&bindArgs); err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", bindArgs, "body", err).Error())
			return
		}

		result, err := svc.Save3(bindArgs.A, bindArgs.B)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusCreated, result)
		return
	})
	mux.POST("/save4", func(ctx *gin.Context) {
		var bindArgs struct {
			A string `json:"a,omitempty"`
			B string `json:"b,omitempty"`
		}
		if err := ctx.Bind(&bindArgs); err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", bindArgs, "body", err).Error())
			return
		}

		result, err := svc.Save4(bindArgs.A, bindArgs.B)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusCreated, result)
		return
	})
	mux.POST("/save5", func(ctx *gin.Context) {
		var bindArgs struct {
			A string `json:"a,omitempty"`
			B string `json:"b,omitempty"`
		}
		if err := ctx.Bind(&bindArgs); err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", bindArgs, "body", err).Error())
			return
		}

		result, err := svc.Save5(ctx.Request.Context(), bindArgs.A, bindArgs.B)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusCreated, result)
		return
	})
	mux.GET("/add/:a/:b", func(ctx *gin.Context) {
		a, err := strconv.Atoi(ctx.Param("a"))
		if err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", a, ctx.Param("a"), err).Error())
			return
		}
		b, err := strconv.Atoi(ctx.Param("b"))
		if err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", b, ctx.Param("b"), err).Error())
			return
		}

		result, err := svc.Add(a, b)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/add2/:a/:b", func(ctx *gin.Context) {
		var a *int
		if aValue, err := strconv.Atoi(ctx.Param("a")); err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", a, ctx.Param("a"), err).Error())
			return
		} else {
			a = &aValue
		}
		var b *int
		if bValue, err := strconv.Atoi(ctx.Param("b")); err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", b, ctx.Param("b"), err).Error())
			return
		} else {
			b = &bValue
		}

		result, err := svc.Add2(a, b)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/add3", func(ctx *gin.Context) {
		var a *int
		if s := ctx.Query("a"); s != "" {
			aValue, err := strconv.Atoi(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", a, s, err).Error())
				return
			}
			a = &aValue
		}
		var b *int
		if s := ctx.Query("b"); s != "" {
			bValue, err := strconv.Atoi(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", b, s, err).Error())
				return
			}
			b = &bValue
		}

		result, err := svc.Add3(a, b)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/query1", func(ctx *gin.Context) {
		var a = ctx.Query("a")
		var beginAt time.Time
		if s := ctx.Query("begin_at"); s != "" {
			beginAtValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", begin_at, s, err).Error())
				return
			}
			beginAt = beginAtValue
		}
		var endAt time.Time
		if s := ctx.Query("end_at"); s != "" {
			endAtValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", end_at, s, err).Error())
				return
			}
			endAt = endAtValue
		}
		var isRaw bool
		if s := ctx.Query("is_raw"); s != "" {
			isRaw = toBool(s)
		}

		result := svc.Query1(a, beginAt, endAt, isRaw)
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/query2/:isRaw", func(ctx *gin.Context) {
		var a = ctx.Query("a")
		var beginAt time.Time
		if s := ctx.Query("begin_at"); s != "" {
			beginAtValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", begin_at, s, err).Error())
				return
			}
			beginAt = beginAtValue
		}
		var endAt time.Time
		if s := ctx.Query("end_at"); s != "" {
			endAtValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", end_at, s, err).Error())
				return
			}
			endAt = endAtValue
		}
		var isRaw = toBool(ctx.Param("isRaw"))

		result := svc.Query2(a, beginAt, endAt, isRaw)
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/query3/:isRaw", func(ctx *gin.Context) {
		var a = ctx.Query("a")
		var beginAt time.Time
		if s := ctx.Query("begin_at"); s != "" {
			beginAtValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", begin_at, s, err).Error())
				return
			}
			beginAt = beginAtValue
		}
		var endAt time.Time
		if s := ctx.Query("end_at"); s != "" {
			endAtValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", end_at, s, err).Error())
				return
			}
			endAt = endAtValue
		}
		var isRaw = toBool(ctx.Param("isRaw"))

		result := svc.Query3(a, beginAt, endAt, &isRaw)
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/query4/:isRaw", func(ctx *gin.Context) {
		var a = ctx.Query("a")
		var createdAt TimeRange
		if s := ctx.Query("created_at.start"); s != "" {
			createdAtStartValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", created_at.start, s, err).Error())
				return
			}
			createdAt.Start = createdAtStartValue
		}
		if s := ctx.Query("created_at.end"); s != "" {
			createdAtEndValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", created_at.end, s, err).Error())
				return
			}
			createdAt.End = createdAtEndValue
		}
		var isRaw = toBool(ctx.Param("isRaw"))

		result := svc.Query4(a, createdAt, &isRaw)
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/query5/:isRaw", func(ctx *gin.Context) {
		var a = ctx.Query("a")
		var createdAt *TimeRange
		if s := ctx.Query("created_at.start"); s != "" {
			createdAtStartValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", created_at.start, s, err).Error())
				return
			}
			createdAt = &TimeRange{}
			createdAt.Start = createdAtStartValue
		}
		if s := ctx.Query("created_at.end"); s != "" {
			createdAtEndValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", created_at.end, s, err).Error())
				return
			}
			if createdAt == nil {
				createdAt = &TimeRange{}
			}
			createdAt.End = createdAtEndValue
		}
		var isRaw = toBool(ctx.Param("isRaw"))

		result := svc.Query5(a, createdAt, &isRaw)
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/query6/:isRaw", func(ctx *gin.Context) {
		var a = ctx.Query("a")
		var createdAt TimeRange2
		if s := ctx.Query("created_at.start"); s != "" {
			createdAtStartValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", created_at.start, s, err).Error())
				return
			}
			createdAt.Start = &createdAtStartValue
		}
		if s := ctx.Query("created_at.end"); s != "" {
			createdAtEndValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", created_at.end, s, err).Error())
				return
			}
			createdAt.End = &createdAtEndValue
		}
		var isRaw = toBool(ctx.Param("isRaw"))

		result := svc.Query6(a, createdAt, &isRaw)
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/query7/:isRaw", func(ctx *gin.Context) {
		var a = ctx.Query("a")
		var createdAt *TimeRange2
		if s := ctx.Query("created_at.start"); s != "" {
			createdAtStartValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", created_at.start, s, err).Error())
				return
			}
			createdAt = &TimeRange2{}
			createdAt.Start = &createdAtStartValue
		}
		if s := ctx.Query("created_at.end"); s != "" {
			createdAtEndValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", created_at.end, s, err).Error())
				return
			}
			if createdAt == nil {
				createdAt = &TimeRange2{}
			}
			createdAt.End = &createdAtEndValue
		}
		var isRaw = toBool(ctx.Param("isRaw"))

		result := svc.Query7(a, createdAt, &isRaw)
		ctx.JSON(http.StatusOK, result)
		return
	})
	// Misc: annotation is missing
}

func InitStringSvcImpl(mux gin.IRouter, svc *StringSvcImpl) {
	mux.GET("/test_by_key", func(ctx *gin.Context) {
		var key Key
		if s := ctx.Query("key"); s != "" {
			keyValue, err := strconv.ParseInt(s, 10, 64)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", key, s, err).Error())
				return
			}
			key = Key(keyValue)
		}

		err := svc.TestByKey(key)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, "OK")
		return
	})
	mux.GET("/allfiles", func(ctx *gin.Context) {
		list, total, err := svc.GetAllFiles()
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}

		result := map[string]interface{}{
			"list":  list,
			"total": total,
		}

		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/test64/:id", func(ctx *gin.Context) {
		id, err := strconv.ParseInt(ctx.Param("id"), 10, 64)
		if err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", id, ctx.Param("id"), err).Error())
			return
		}

		err = svc.TestInt64Path(id)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, "OK")
		return
	})
	mux.GET("/test64", func(ctx *gin.Context) {
		var id int64
		if s := ctx.Query("id"); s != "" {
			idValue, err := strconv.ParseInt(s, 10, 64)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", id, s, err).Error())
				return
			}
			id = idValue
		}

		err := svc.TestInt64Query(id)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, "OK")
		return
	})
	mux.GET("/test_query_args1/:id", func(ctx *gin.Context) {
		id, err := strconv.ParseInt(ctx.Param("id"), 10, 64)
		if err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", id, ctx.Param("id"), err).Error())
			return
		}
		var args QueryArgs
		if s := ctx.Query("args.fint"); s != "" {
			argsFintValue, err := strconv.Atoi(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", args.fint, s, err).Error())
				return
			}
			args.fint = argsFintValue
		}
		args.fstring = ctx.Query("args.fstring")
		if s := ctx.Query("args.ftime"); s != "" {
			argsFtimeValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", args.ftime, s, err).Error())
				return
			}
			args.ftime = argsFtimeValue
		}
		if s := ctx.Query("args.fintptr"); s != "" {
			argsFintptrValue, err := strconv.Atoi(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", args.fintptr, s, err).Error())
				return
			}
			args.fintptr = &argsFintptrValue
		}
		if s := ctx.Query("args.fstringptr"); s != "" {
			args.fstringptr = &s
		}
		if s := ctx.Query("args.ftimeptr"); s != "" {
			argsFtimeptrValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", args.ftimeptr, s, err).Error())
				return
			}
			args.ftimeptr = &argsFtimeptrValue
		}

		err = svc.TestQueryArgs1(id, args)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, "OK")
		return
	})
	mux.GET("/test_query_args2/:id", func(ctx *gin.Context) {
		id, err := strconv.ParseInt(ctx.Param("id"), 10, 64)
		if err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", id, ctx.Param("id"), err).Error())
			return
		}
		var args *QueryArgs
		if s := ctx.Query("args.fint"); s != "" {
			argsFintValue, err := strconv.Atoi(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", args.fint, s, err).Error())
				return
			}
			args = &QueryArgs{}
			args.fint = argsFintValue
		}
		if s := ctx.Query("args.fstring"); s != "" {
			if args == nil {
				args = &QueryArgs{}
			}
			args.fstring = s
		}
		if s := ctx.Query("args.ftime"); s != "" {
			argsFtimeValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", args.ftime, s, err).Error())
				return
			}
			if args == nil {
				args = &QueryArgs{}
			}
			args.ftime = argsFtimeValue
		}
		if s := ctx.Query("args.fintptr"); s != "" {
			argsFintptrValue, err := strconv.Atoi(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", args.fintptr, s, err).Error())
				return
			}
			if args == nil {
				args = &QueryArgs{}
			}
			args.fintptr = &argsFintptrValue
		}
		if s := ctx.Query("args.fstringptr"); s != "" {
			if args == nil {
				args = &QueryArgs{}
			}
			args.fstringptr = &s
		}
		if s := ctx.Query("args.ftimeptr"); s != "" {
			argsFtimeptrValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", args.ftimeptr, s, err).Error())
				return
			}
			if args == nil {
				args = &QueryArgs{}
			}
			args.ftimeptr = &argsFtimeptrValue
		}

		err = svc.TestQueryArgs2(id, args)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, "OK")
		return
	})
	mux.GET("/test_query_args3/:id", func(ctx *gin.Context) {
		id, err := strconv.ParseInt(ctx.Param("id"), 10, 64)
		if err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", id, ctx.Param("id"), err).Error())
			return
		}
		var args QueryArgs
		if s := ctx.Query("fint"); s != "" {
			argsFintValue, err := strconv.Atoi(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", fint, s, err).Error())
				return
			}
			args.fint = argsFintValue
		}
		args.fstring = ctx.Query("fstring")
		if s := ctx.Query("ftime"); s != "" {
			argsFtimeValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", ftime, s, err).Error())
				return
			}
			args.ftime = argsFtimeValue
		}
		if s := ctx.Query("fintptr"); s != "" {
			argsFintptrValue, err := strconv.Atoi(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", fintptr, s, err).Error())
				return
			}
			args.fintptr = &argsFintptrValue
		}
		if s := ctx.Query("fstringptr"); s != "" {
			args.fstringptr = &s
		}
		if s := ctx.Query("ftimeptr"); s != "" {
			argsFtimeptrValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", ftimeptr, s, err).Error())
				return
			}
			args.ftimeptr = &argsFtimeptrValue
		}

		err = svc.TestQueryArgs3(id, args)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, "OK")
		return
	})
	mux.GET("/test_query_args4/:id", func(ctx *gin.Context) {
		id, err := strconv.ParseInt(ctx.Param("id"), 10, 64)
		if err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", id, ctx.Param("id"), err).Error())
			return
		}
		var args *QueryArgs
		if s := ctx.Query("fint"); s != "" {
			argsFintValue, err := strconv.Atoi(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", fint, s, err).Error())
				return
			}
			args = &QueryArgs{}
			args.fint = argsFintValue
		}
		if s := ctx.Query("fstring"); s != "" {
			if args == nil {
				args = &QueryArgs{}
			}
			args.fstring = s
		}
		if s := ctx.Query("ftime"); s != "" {
			argsFtimeValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", ftime, s, err).Error())
				return
			}
			if args == nil {
				args = &QueryArgs{}
			}
			args.ftime = argsFtimeValue
		}
		if s := ctx.Query("fintptr"); s != "" {
			argsFintptrValue, err := strconv.Atoi(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", fintptr, s, err).Error())
				return
			}
			if args == nil {
				args = &QueryArgs{}
			}
			args.fintptr = &argsFintptrValue
		}
		if s := ctx.Query("fstringptr"); s != "" {
			if args == nil {
				args = &QueryArgs{}
			}
			args.fstringptr = &s
		}
		if s := ctx.Query("ftimeptr"); s != "" {
			argsFtimeptrValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", ftimeptr, s, err).Error())
				return
			}
			if args == nil {
				args = &QueryArgs{}
			}
			args.ftimeptr = &argsFtimeptrValue
		}

		err = svc.TestQueryArgs4(id, args)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, "OK")
		return
	})
	mux.GET("/ping", func(ctx *gin.Context) {
		err := svc.Ping()
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, "OK")
		return
	})
	mux.GET("/echo", func(ctx *gin.Context) {
		var a = ctx.Query("a")

		result := svc.Echo(a)
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/echo_body1", func(ctx *gin.Context) {
		result, err := svc.EchoBody(ctx.Request.Body)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.POST("/echo3", func(ctx *gin.Context) {
		var bindArgs struct {
			A string `json:"a,omitempty"`
		}
		if err := ctx.Bind(&bindArgs); err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", bindArgs, "body", err).Error())
			return
		}

		result, err := svc.Echo3(ctx.Request.Context(), bindArgs.A)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusCreated, result)
		return
	})
	mux.GET("/concat", func(ctx *gin.Context) {
		var a = ctx.Query("a")
		var b = ctx.Query("b")

		result, err := svc.Concat(a, b)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/concat1", func(ctx *gin.Context) {
		var a *string
		if s := ctx.Query("a"); s != "" {
			a = &s
		}
		var b *string
		if s := ctx.Query("b"); s != "" {
			b = &s
		}

		result, err := svc.Concat1(a, b)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/concat2/:a/:b", func(ctx *gin.Context) {
		var a = ctx.Param("a")
		var b = ctx.Param("b")

		result, err := svc.Concat2(a, b)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/concat3/:a/:b", func(ctx *gin.Context) {
		var a = ctx.Param("a")
		var b = ctx.Param("b")

		result, err := svc.Concat3(&a, &b)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/sub", func(ctx *gin.Context) {
		var a = ctx.Query("a")
		var start int64
		if s := ctx.Query("start"); s != "" {
			startValue, err := strconv.ParseInt(s, 10, 64)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", start, s, err).Error())
				return
			}
			start = startValue
		}

		result, err := svc.Sub(a, start)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.POST("/save/:a", func(ctx *gin.Context) {
		var a = ctx.Param("a")
		var b strings.Builder
		if _, err := io.Copy(&b, ctx.Request.Body); err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", b, "body", err).Error())
			return
		}

		result, err := svc.Save(a, b.String())
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusCreated, result)
		return
	})
	mux.POST("/save2/:a", func(ctx *gin.Context) {
		var a = ctx.Param("a")
		var b strings.Builder
		if _, err := io.Copy(&b, ctx.Request.Body); err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", b, "body", err).Error())
			return
		}

		result, err := svc.Save2(&a, b.String())
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusCreated, result)
		return
	})
	mux.POST("/save3", func(ctx *gin.Context) {
		var bindArgs struct {
			A *string `json:"a,omitempty"`
			B *string `json:"b,omitempty"`
		}
		if err := ctx.Bind(&bindArgs); err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", bindArgs, "body", err).Error())
			return
		}

		result, err := svc.Save3(bindArgs.A, bindArgs.B)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusCreated, result)
		return
	})
	mux.POST("/save4", func(ctx *gin.Context) {
		var bindArgs struct {
			A string `json:"a,omitempty"`
			B string `json:"b,omitempty"`
		}
		if err := ctx.Bind(&bindArgs); err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", bindArgs, "body", err).Error())
			return
		}

		result, err := svc.Save4(bindArgs.A, bindArgs.B)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusCreated, result)
		return
	})
	mux.POST("/save5", func(ctx *gin.Context) {
		var bindArgs struct {
			A string `json:"a,omitempty"`
			B string `json:"b,omitempty"`
		}
		if err := ctx.Bind(&bindArgs); err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", bindArgs, "body", err).Error())
			return
		}

		result, err := svc.Save5(ctx.Request.Context(), bindArgs.A, bindArgs.B)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusCreated, result)
		return
	})
	mux.GET("/add/:a/:b", func(ctx *gin.Context) {
		a, err := strconv.Atoi(ctx.Param("a"))
		if err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", a, ctx.Param("a"), err).Error())
			return
		}
		b, err := strconv.Atoi(ctx.Param("b"))
		if err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", b, ctx.Param("b"), err).Error())
			return
		}

		result, err := svc.Add(a, b)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/add2/:a/:b", func(ctx *gin.Context) {
		var a *int
		if aValue, err := strconv.Atoi(ctx.Param("a")); err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", a, ctx.Param("a"), err).Error())
			return
		} else {
			a = &aValue
		}
		var b *int
		if bValue, err := strconv.Atoi(ctx.Param("b")); err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", b, ctx.Param("b"), err).Error())
			return
		} else {
			b = &bValue
		}

		result, err := svc.Add2(a, b)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/add3", func(ctx *gin.Context) {
		var a *int
		if s := ctx.Query("a"); s != "" {
			aValue, err := strconv.Atoi(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", a, s, err).Error())
				return
			}
			a = &aValue
		}
		var b *int
		if s := ctx.Query("b"); s != "" {
			bValue, err := strconv.Atoi(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", b, s, err).Error())
				return
			}
			b = &bValue
		}

		result, err := svc.Add3(a, b)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/query1", func(ctx *gin.Context) {
		var a = ctx.Query("a")
		var beginAt time.Time
		if s := ctx.Query("begin_at"); s != "" {
			beginAtValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", begin_at, s, err).Error())
				return
			}
			beginAt = beginAtValue
		}
		var endAt time.Time
		if s := ctx.Query("end_at"); s != "" {
			endAtValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", end_at, s, err).Error())
				return
			}
			endAt = endAtValue
		}
		var isRaw bool
		if s := ctx.Query("is_raw"); s != "" {
			isRaw = toBool(s)
		}

		result := svc.Query1(a, beginAt, endAt, isRaw)
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/query2/:isRaw", func(ctx *gin.Context) {
		var a = ctx.Query("a")
		var beginAt time.Time
		if s := ctx.Query("begin_at"); s != "" {
			beginAtValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", begin_at, s, err).Error())
				return
			}
			beginAt = beginAtValue
		}
		var endAt time.Time
		if s := ctx.Query("end_at"); s != "" {
			endAtValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", end_at, s, err).Error())
				return
			}
			endAt = endAtValue
		}
		var isRaw = toBool(ctx.Param("isRaw"))

		result := svc.Query2(a, beginAt, endAt, isRaw)
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/query3/:isRaw", func(ctx *gin.Context) {
		var a = ctx.Query("a")
		var beginAt time.Time
		if s := ctx.Query("begin_at"); s != "" {
			beginAtValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", begin_at, s, err).Error())
				return
			}
			beginAt = beginAtValue
		}
		var endAt time.Time
		if s := ctx.Query("end_at"); s != "" {
			endAtValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", end_at, s, err).Error())
				return
			}
			endAt = endAtValue
		}
		var isRaw = toBool(ctx.Param("isRaw"))

		result := svc.Query3(a, beginAt, endAt, &isRaw)
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/query4/:isRaw", func(ctx *gin.Context) {
		var a = ctx.Query("a")
		var createdAt TimeRange
		if s := ctx.Query("created_at.start"); s != "" {
			createdAtStartValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", created_at.start, s, err).Error())
				return
			}
			createdAt.Start = createdAtStartValue
		}
		if s := ctx.Query("created_at.end"); s != "" {
			createdAtEndValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", created_at.end, s, err).Error())
				return
			}
			createdAt.End = createdAtEndValue
		}
		var isRaw = toBool(ctx.Param("isRaw"))

		result := svc.Query4(a, createdAt, &isRaw)
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/query5/:isRaw", func(ctx *gin.Context) {
		var a = ctx.Query("a")
		var createdAt *TimeRange
		if s := ctx.Query("created_at.start"); s != "" {
			createdAtStartValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", created_at.start, s, err).Error())
				return
			}
			createdAt = &TimeRange{}
			createdAt.Start = createdAtStartValue
		}
		if s := ctx.Query("created_at.end"); s != "" {
			createdAtEndValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", created_at.end, s, err).Error())
				return
			}
			if createdAt == nil {
				createdAt = &TimeRange{}
			}
			createdAt.End = createdAtEndValue
		}
		var isRaw = toBool(ctx.Param("isRaw"))

		result := svc.Query5(a, createdAt, &isRaw)
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/query6/:isRaw", func(ctx *gin.Context) {
		var a = ctx.Query("a")
		var createdAt TimeRange2
		if s := ctx.Query("created_at.start"); s != "" {
			createdAtStartValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", created_at.start, s, err).Error())
				return
			}
			createdAt.Start = &createdAtStartValue
		}
		if s := ctx.Query("created_at.end"); s != "" {
			createdAtEndValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", created_at.end, s, err).Error())
				return
			}
			createdAt.End = &createdAtEndValue
		}
		var isRaw = toBool(ctx.Param("isRaw"))

		result := svc.Query6(a, createdAt, &isRaw)
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/query7/:isRaw", func(ctx *gin.Context) {
		var a = ctx.Query("a")
		var createdAt *TimeRange2
		if s := ctx.Query("created_at.start"); s != "" {
			createdAtStartValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", created_at.start, s, err).Error())
				return
			}
			createdAt = &TimeRange2{}
			createdAt.Start = &createdAtStartValue
		}
		if s := ctx.Query("created_at.end"); s != "" {
			createdAtEndValue, err := toDatetime(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", created_at.end, s, err).Error())
				return
			}
			if createdAt == nil {
				createdAt = &TimeRange2{}
			}
			createdAt.End = &createdAtEndValue
		}
		var isRaw = toBool(ctx.Param("isRaw"))

		result := svc.Query7(a, createdAt, &isRaw)
		ctx.JSON(http.StatusOK, result)
		return
	})
	// Misc: annotation is missing
}

func InitStringSvcWithContext(mux gin.IRouter, svc *StringSvcWithContext) {
	mux.GET("/echo", func(ctx *gin.Context) {
		var a = ctx.Query("a")

		result := svc.Echo(ctx.Request.Context(), a)
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/echo", func(ctx *gin.Context) {
		result, err := svc.EchoBody(ctx.Request.Context(), ctx.Request.Body)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/concat", func(ctx *gin.Context) {
		var a = ctx.Query("a")
		var b = ctx.Query("b")

		result, err := svc.Concat(ctx.Request.Context(), a, b)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/concat1", func(ctx *gin.Context) {
		var a *string
		if s := ctx.Query("a"); s != "" {
			a = &s
		}
		var b *string
		if s := ctx.Query("b"); s != "" {
			b = &s
		}

		result, err := svc.Concat1(ctx.Request.Context(), a, b)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/concat2/:a/:b", func(ctx *gin.Context) {
		var a = ctx.Param("a")
		var b = ctx.Param("b")

		result, err := svc.Concat2(ctx.Request.Context(), a, b)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/concat3/:a/:b", func(ctx *gin.Context) {
		var a = ctx.Param("a")
		var b = ctx.Param("b")

		result, err := svc.Concat3(ctx.Request.Context(), &a, &b)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/sub", func(ctx *gin.Context) {
		var a = ctx.Query("a")
		var start int64
		if s := ctx.Query("start"); s != "" {
			startValue, err := strconv.ParseInt(s, 10, 64)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", start, s, err).Error())
				return
			}
			start = startValue
		}

		result, err := svc.Sub(ctx.Request.Context(), a, start)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.POST("/save/:a", func(ctx *gin.Context) {
		var a = ctx.Param("a")
		var b strings.Builder
		if _, err := io.Copy(&b, ctx.Request.Body); err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", b, "body", err).Error())
			return
		}

		result, err := svc.Save(ctx.Request.Context(), a, b.String())
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusCreated, result)
		return
	})
	mux.POST("/save2/:a", func(ctx *gin.Context) {
		var a = ctx.Param("a")
		var b strings.Builder
		if _, err := io.Copy(&b, ctx.Request.Body); err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", b, "body", err).Error())
			return
		}

		result, err := svc.Save2(ctx.Request.Context(), &a, b.String())
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusCreated, result)
		return
	})
	mux.GET("/add/:a/:b", func(ctx *gin.Context) {
		a, err := strconv.Atoi(ctx.Param("a"))
		if err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", a, ctx.Param("a"), err).Error())
			return
		}
		b, err := strconv.Atoi(ctx.Param("b"))
		if err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", b, ctx.Param("b"), err).Error())
			return
		}

		result, err := svc.Add(ctx.Request.Context(), a, b)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/add2/:a/:b", func(ctx *gin.Context) {
		var a *int
		if aValue, err := strconv.Atoi(ctx.Param("a")); err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", a, ctx.Param("a"), err).Error())
			return
		} else {
			a = &aValue
		}
		var b *int
		if bValue, err := strconv.Atoi(ctx.Param("b")); err != nil {
			ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", b, ctx.Param("b"), err).Error())
			return
		} else {
			b = &bValue
		}

		result, err := svc.Add2(ctx.Request.Context(), a, b)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	mux.GET("/add3", func(ctx *gin.Context) {
		var a *int
		if s := ctx.Query("a"); s != "" {
			aValue, err := strconv.Atoi(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", a, s, err).Error())
				return
			}
			a = &aValue
		}
		var b *int
		if s := ctx.Query("b"); s != "" {
			bValue, err := strconv.Atoi(s)
			if err != nil {
				ctx.String(http.StatusBadRequest, fmt.Errorf("argument %q is invalid - %q", b, s, err).Error())
				return
			}
			b = &bValue
		}

		result, err := svc.Add3(ctx.Request.Context(), a, b)
		if err != nil {
			ctx.String(httpCodeWith(err), err.Error())
			return
		}
		ctx.JSON(http.StatusOK, result)
		return
	})
	// Misc: annotation is missing
}
